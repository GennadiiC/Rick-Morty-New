{"ast":null,"code":"import _objectSpread from\"/Users/g/Documents/myCodeProjects/rick-morty-new/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useForm}from'react-hook-form';import{useEffect}from'react';import{getAllEpisodesAsync,setSearchFormEpisode,setWatchList}from'../redux/rickMortySlice';import{useSelector,useDispatch}from'react-redux';import{Table}from'./reusable/Table';// component to display on 'My Watchlist' link\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var WatchList=function WatchList(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,reset=_useForm.reset;var dispatch=useDispatch();useEffect(function(){dispatch(getAllEpisodesAsync());},[dispatch]);var _useSelector=useSelector(function(state){return state.rickMorty;}),displayAllEpisodes=_useSelector.displayAllEpisodes,allEpisodesStatus=_useSelector.allEpisodesStatus,allEpisodesError=_useSelector.allEpisodesError,searchFormEpisode=_useSelector.searchFormEpisode,watchlist=_useSelector.watchlist;useEffect(function(){if(localStorage.length){var arr=[];for(var i=0;i<localStorage.length;i++){var obj=JSON.parse(localStorage.getItem(localStorage.key(i)));arr.push(obj);}dispatch(setWatchList(arr));}},[localStorage.length]);var onSubmit=function onSubmit(value){if(value.episode!==''){dispatch(setSearchFormEpisode(value.episode));var foundEpisode=displayAllEpisodes.find(function(ep){return ep.name===value.episode;});foundEpisode=_objectSpread(_objectSpread({},foundEpisode),{},{checked:false});if(JSON.parse(localStorage.getItem(foundEpisode.id))!==foundEpisode.id){localStorage.setItem(foundEpisode.id,JSON.stringify(foundEpisode));}reset();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid mt-5 custom-width\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"h3 text-center my-4\",children:\"Watchlist\"}),searchFormEpisode===''?/*#__PURE__*/_jsx(\"p\",{className:\"text-center my-3\",children:\"Enter name...\"}):allEpisodesStatus==='loading'?/*#__PURE__*/_jsx(\"p\",{className:\"text-center my-3\",children:\"Loading...\"}):allEpisodesStatus==='succeeded'&&displayAllEpisodes.error?/*#__PURE__*/_jsxs(\"p\",{className:\"text-center my-3\",children:[\"Ops, \",displayAllEpisodes.error.toLowerCase(),\"!\"]}):allEpisodesStatus==='rejected'&&allEpisodesError?/*#__PURE__*/_jsxs(\"p\",{className:\"text-center my-3\",children:[\"Ops, \",allEpisodesError.toLowerCase(),\"!\"]}):null,/*#__PURE__*/_jsxs(\"form\",{className:\"input-group input-group-sm my-4\",onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({className:\"form-control\",list:\"datalistOptions\",id:\"exampleDataList\"},register('episode')),{},{\"aria-label\":\"Text input with dropdown button\",autoComplete:\"off\"})),/*#__PURE__*/_jsx(\"datalist\",{className:\"datalist\",id:\"datalistOptions\",children:allEpisodesStatus==='loading'?/*#__PURE__*/_jsx(\"option\",{label:\"loading\",children:\"Loading...\"}):allEpisodesStatus==='succeeded'&&displayAllEpisodes?displayAllEpisodes.map(function(ep){return/*#__PURE__*/_jsx(\"option\",{value:ep.name},ep.id);}):allEpisodesStatus==='failed'&&allEpisodesError?/*#__PURE__*/_jsxs(\"option\",{label:\"error\",children:[\"Oops, \",allEpisodesError]}):null}),/*#__PURE__*/_jsx(\"button\",{className:\"btn\",type:\"button\",onClick:handleSubmit(onSubmit),children:\"Add Episode\"})]}),watchlist===null?/*#__PURE__*/_jsx(\"p\",{className:\"text-center my-3\",children:\"Your watchlist is empty.\"}):watchlist!==null?/*#__PURE__*/_jsx(\"p\",{className:\"text-center my-3\",children:\"Your watchlist:\"}):null,watchlist!==null?/*#__PURE__*/_jsx(Table,{dataArr:watchlist,className:'table table-hover',col1:'Name',col2:'Code',col3:'Air Date',col4:'Remove From Watchlist',col5:'Done',mapProps:{one:'name',two:'episode',three:'air_date',four:'click to remove'}}):null]});};","map":{"version":3,"names":["useForm","useEffect","getAllEpisodesAsync","setSearchFormEpisode","setWatchList","useSelector","useDispatch","Table","WatchList","register","handleSubmit","reset","dispatch","state","rickMorty","displayAllEpisodes","allEpisodesStatus","allEpisodesError","searchFormEpisode","watchlist","localStorage","length","arr","i","obj","JSON","parse","getItem","key","push","onSubmit","value","episode","foundEpisode","find","ep","name","checked","id","setItem","stringify","error","toLowerCase","map","one","two","three","four"],"sources":["/Users/g/Documents/myCodeProjects/rick-morty-new/src/components/WatchList.js"],"sourcesContent":["import { useForm } from 'react-hook-form';\nimport { useEffect } from 'react';\nimport { getAllEpisodesAsync, setSearchFormEpisode, setWatchList } from '../redux/rickMortySlice';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { Table } from './reusable/Table'\n\n\n// component to display on 'My Watchlist' link\nexport const WatchList = () => {\n\n  const { register, handleSubmit, reset } = useForm();\n\n  const dispatch = useDispatch()\n\n  useEffect(() => {\n    dispatch(getAllEpisodesAsync())\n  }, [dispatch])\n\n\n  const {\n    displayAllEpisodes,\n    allEpisodesStatus,\n    allEpisodesError, \n    searchFormEpisode,\n    watchlist\n  } = useSelector(state => state.rickMorty)\n\n  useEffect(() => {\n    if (localStorage.length) {\n      let arr = []\n      for (let i = 0; i < localStorage.length; i++) {\n        let obj = JSON.parse(localStorage.getItem(localStorage.key(i)))\n        arr.push(obj)\n      }\n      dispatch(setWatchList(arr))\n    }\n  }, [localStorage.length])\n\n\n  const onSubmit = (value) => {\n    if (value.episode !== '') {\n      dispatch(setSearchFormEpisode(value.episode))\n      let foundEpisode = displayAllEpisodes.find(ep => ep.name === value.episode)\n      foundEpisode = {\n        ...foundEpisode,\n        checked: false\n      }\n      if (JSON.parse(localStorage.getItem(foundEpisode.id)) !== foundEpisode.id) {\n        localStorage.setItem(foundEpisode.id, JSON.stringify(foundEpisode))\n      }\n      reset();\n    }\n  }\n\n\n  return (\n    <div className='container-fluid mt-5 custom-width'>\n      <h3 className='h3 text-center my-4'>Watchlist</h3>\n    \n      {\n        searchFormEpisode === '' ?\n        <p className=\"text-center my-3\">Enter name...</p> :\n        allEpisodesStatus === 'loading' ?\n        <p className=\"text-center my-3\">Loading...</p> :\n        allEpisodesStatus === 'succeeded' && displayAllEpisodes.error ?\n        <p className=\"text-center my-3\">Ops, {displayAllEpisodes.error.toLowerCase()}!</p> :\n        allEpisodesStatus === 'rejected' && allEpisodesError ?\n        <p className=\"text-center my-3\">Ops, {allEpisodesError.toLowerCase()}!</p> :\n        null\n      }\n\n      <form className='input-group input-group-sm my-4' onSubmit={handleSubmit(onSubmit)}>\n        <input \n          className=\"form-control\" \n          list=\"datalistOptions\" \n          id=\"exampleDataList\" \n          {...register('episode')} \n          aria-label=\"Text input with dropdown button\" \n          autoComplete=\"off\" \n        />\n        <datalist className='datalist' id=\"datalistOptions\">\n          \n          { \n            allEpisodesStatus === 'loading' ?\n            <option label='loading'>Loading...</option> :\n            allEpisodesStatus === 'succeeded' && displayAllEpisodes ?\n            displayAllEpisodes.map(ep => \n              <option key={ep.id} value={ep.name} />\n            ) :\n            allEpisodesStatus === 'failed' && allEpisodesError ?\n            <option label='error'>Oops, {allEpisodesError}</option> :\n            null\n          }\n          \n        </datalist>\n        <button className=\"btn\" type=\"button\" onClick={handleSubmit(onSubmit)}>Add Episode</button>\n      </form>\n\n      {\n        watchlist === null ?\n        <p className=\"text-center my-3\">Your watchlist is empty.</p> :\n        watchlist !== null ? \n        <p className=\"text-center my-3\">Your watchlist:</p> :\n        null\n      }\n      {\n        watchlist !== null ?\n          <Table \n            dataArr={watchlist}\n            className={'table table-hover'}\n            col1={'Name'}\n            col2={'Code'}\n            col3={'Air Date'}\n            col4={'Remove From Watchlist'}\n            col5={'Done'}\n            mapProps={{\n              one: 'name',\n              two: 'episode',\n              three: 'air_date',\n              four: 'click to remove'\n            }}\n          />\n         :\n        null\n      }\n    </div>\n  )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}